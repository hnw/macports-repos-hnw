# $Id:$

PortSystem        1.0

name              php5-suhosin
version           0.9.27

categories        www net devel
platforms         darwin freebsd openbsd
maintainers       y@hnw.jp
homepage          http://www.hardened-php.net/suhosin/
description       php5 extension for server protection
long_description \
    Suhosin is an advanced protection system for PHP installations. It \
    was designed to protect servers and users from known and unknown \
    flaws in PHP applications and the PHP core. Suhosin comes in two \
    independent parts, that can be used separately or in \
    combination. The first part is a small patch against the PHP core, \
    that implements a few low-level protections against \
    bufferoverflows or format string vulnerabilities and the second \
    part is a powerful PHP extension that implements all the other \
    protections.

master_sites      http://download.suhosin.org/
distname          suhosin-${version}
extract.suffix    .tgz
checksums         md5 9aae02bc2d2bcf9b8bd97cd22f56a8b8 \
                  sha1 3033bd3840c75786179cf8240f63d97b5f6accbf \
                  rmd160 46bf47daf0dab05359da62fde8a76ba7c43b3dbc

depends_lib       port:php5
configure.args    --with-php-config=${prefix}/bin/php-config

pre-configure {
    system "cd ${worksrcpath}; phpize"
}

destroot.destdir INSTALL_ROOT=${destroot}

post-install {

    set ini_file          "${prefix}/etc/php.ini"
    set suhosin_docs      "${homepage}configuration.html"

    ui_msg "
    ***************************************************************************
    * To enable the suhosin extension in php, add or edit the following
    * lines in ${ini_file}:
    *
    * extension_dir = \"${prefix}/lib/php/extensions/no-debug-non-zts-20060613\"
    * extension = suhosin.so
    *
    * For more information and details about configuration settings, see
    * ${suhosin_docs}
    ***************************************************************************"
}

livecheck.check  regex
livecheck.url    ${homepage}
livecheck.regex  "Release-((\\d\\.?)+)"

